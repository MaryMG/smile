(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),l=(n(81),n(17)),u=n(24),s=n(146),c=n(61);function m(){var e=Object(c.a)(['\nbackground: url("../image/61377.jpg");\nbackground-position: center center;\nbackground-repeat: no-repeat;\nbackground-size: cover;\nwidth: 100vw; \nheight:100vh;\npadding: 5px;\nmargin-top: 0px;\n\n']);return m=function(){return e},e}var p=n(62).a.div(m()),g={background:" linear-gradient(120deg, #f6d365 0%, #fda085 100%)",borderRadius:3,border:0,color:"white",height:48,padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"};function d(){return r.a.createElement("div",null,r.a.createElement(p,null,r.a.createElement(l.b,{to:"/signup"},r.a.createElement(s.a,{style:g,variant:"contained",color:"primary"},"Paciente")),r.a.createElement(l.b,{to:"/signupsi"},r.a.createElement(s.a,{variant:"contained",color:"primary"},"Psicologo"))))}var f,h=n(8),v=n.n(h),E=n(27),b=n(28),y=n(31),w=n(29),C=n(32),x=n(66);f="here should be your production endpoint";var S=n.n(x).a.create({withCredentials:!0,baseURL:f}),P={signup:function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.a.awrap(S.post("/auth/signup",e));case 3:return t=n.sent,n.abrupt("return",t);case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])},login:function(e){return S.post("/auth/login",e)},getUser:function(){return S.get("/profile")},logout:function(){return S.post("/auth/logout")},getPosts:function(){return S.get("/post")},getRegistro:function(e){return S.post("/registro",{docId:e})},getDoctors:function(){return S.get("/auth/getDoctors")},submitPost:function(e){return S.post("/post",e)},submitRegistro:function(e){return S.post("/setregistro",e)}},j=n(36),O=n.n(j),D=Object(a.createContext)(),I=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loggedUser:!1,formSignup:{},loginForm:{email:"",password:""},registros:[],user:{},infoDoctors:{}},n.handleInput=function(e,t){var a=n.state[t];a[e.target.name]=e.target.value,n.setState({obj:a})},n.handleSignup=function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),a.next=3,v.a.awrap(P.signup(n.state.formSignup));case 3:if(!(t=a.sent)){a.next=6;break}return a.abrupt("return",t);case 6:O.a.fire("Welcome ".concat(n.state.formSignup.name),"User created","success");case 7:case"end":return a.stop()}}))},n.handleSignupDoctor=function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),a.next=3,v.a.awrap(P.signup(Object.assign({role:"Doctor"},n.state.formSignup)));case 3:if(!(t=a.sent)){a.next=6;break}return a.abrupt("return",t);case 6:O.a.fire("Welcome ".concat(n.state.formSignup.name),"User created","success");case 7:case"end":return a.stop()}}))},n.handleLogin=function(e,t){e.preventDefault(),P.login(n.state.loginForm).then((function(e){var a=e.data;n.setState({loggedUser:!0,user:a.user}),t()})).catch((function(e){O.a.fire("email o contrase\xf1a incorrecta")}))},n.settingRegistro=function(){var e,t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(P.getRegistro(n.state.user._id));case 2:e=a.sent,t=e.data,console.log(t),n.setState({registros:t.paciente});case 6:case"end":return a.stop()}}))},n.handleLogout=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(P.logout());case 2:window.localStorage.clear(),n.setState({loggedUser:!1,user:{}}),e(),n.state.loginForm.email="";case 6:case"end":return t.stop()}}))},n}return Object(C.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.cookie&&P.getUser().then((function(t){var n=t.data;e.setState({loggedUser:!0,user:n.user}),O.a.fire("Welcome back ".concat(n.user.name," "),"","success")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return console.log(this.state.registros),r.a.createElement(D.Provider,{value:{loggedUser:this.state.loggedUser,formSignup:this.state.formSignup,loginForm:this.state.loginForm,handleInput:this.handleInput,handleSignup:this.handleSignup,handleSignupDoctor:this.handleSignupDoctor,handleLogin:this.handleLogin,handleLogout:this.handleLogout,state:this.state,settingPosts:this.settingPosts,registros:this.state.registros,settingRegistro:this.settingRegistro}},this.props.children)}}]),t}(a.Component),k=n(138),R=n(145),F=Object(k.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:200}}}}));function N(e){var t=F();return r.a.createElement(D.Consumer,null,(function(n){return r.a.createElement("form",{onSubmit:function(t){n.handleLogin(t,(function(){e.history.push("/profile")}))},className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(R.a,{id:"email",label:"Correo",variant:"outlined",autoComplete:"email",type:"email",name:"email",value:n.loginForm.email,onChange:function(e){return n.handleInput(e,"loginForm")}}),r.a.createElement(R.a,{id:"password",label:"Contrase\xf1a",type:"password",autoComplete:"current-password",variant:"outlined",name:"password",valuevalue:n.loginForm.password,onChange:function(e){return n.handleInput(e,"loginForm")}}),r.a.createElement(s.a,{type:"submit",variant:"contained",color:"primary"},"LOGIN"))}))}var L=Object(k.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:200}}}}));function U(e){var t=L();return r.a.createElement(D.Consumer,null,(function(n){return r.a.createElement("form",{onSubmit:function(t){n.handleSignup(t),e.history.push("/login")},className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(R.a,{id:"username",label:"Nombre Completo",variant:"outlined",type:"text",name:"username",value:n.formSignup.username,onChange:function(e){return n.handleInput(e,"formSignup")}}),r.a.createElement(R.a,{id:"age",label:"Edad",variant:"outlined",type:"Number",name:"age",value:n.formSignup.age,onChange:function(e){return n.handleInput(e,"formSignup")}}),r.a.createElement(R.a,{id:"email",label:"Correo",variant:"outlined",autoComplete:"email",type:"email",name:"email",value:n.formSignup.email,onChange:function(e){return n.handleInput(e,"formSignup")}}),r.a.createElement(R.a,{id:"password",label:"Contrase\xf1a",type:"password",autoComplete:"current-password",variant:"outlined",name:"password",onChange:function(e){return n.handleInput(e,"formSignup")},value:n.formSignup.password}),r.a.createElement(s.a,{type:"submit",variant:"contained",color:"primary"},"Crear Cuenta"))}))}var T=Object(k.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:200}}}}));function W(e){var t=T();return r.a.createElement(D.Consumer,null,(function(n){return r.a.createElement("form",{onSubmit:function(t){n.handleSignupDoctor(t),e.history.push("/login")},className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(R.a,{id:"username",label:"Nombre Completo",variant:"outlined",type:"text",name:"username",value:n.formSignup.username,onChange:function(e){return n.handleInput(e,"formSignup")}}),r.a.createElement(R.a,{id:"email",label:"Correo",variant:"outlined",autoComplete:"email",type:"email",name:"email",value:n.formSignup.email,onChange:function(e){return n.handleInput(e,"formSignup")}}),r.a.createElement(R.a,{id:"cedula",label:"C\xe9dula Profesional",variant:"outlined",type:"text",name:"cedula",value:n.formSignup.cedula,onChange:function(e){return n.handleInput(e,"formSignup")},required:!0}),r.a.createElement(R.a,{id:"phone",label:"Celular",variant:"outlined",type:"Number",name:"phone",value:n.formSignup.phone,onChange:function(e){return n.handleInput(e,"formSignup")},required:!0}),r.a.createElement(R.a,{id:"password",label:"Contrase\xf1a",type:"password",autoComplete:"current-password",variant:"outlined",name:"password",onChange:function(e){return n.handleInput(e,"formSignup")},value:n.formSignup.password}),r.a.createElement(s.a,{type:"submit",variant:"contained",color:"primary"},"Crear Cuenta"))}))}var z=n(41),A=n(42),B=n(139),G=n(140),M=n(141),V=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[],singlePost:{},doctors:[]},n.settingPosts=function(){var e,t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(P.getPosts());case 2:return e=a.sent,a.next=5,v.a.awrap(P.getDoctors());case 5:t=a.sent,n.setState({posts:e.data.post,doctors:t.data.doctors});case 7:case"end":return a.stop()}}))},n.submitPost=function(e){var t,a;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,v.a.awrap(P.submitPost(n.state.singlePost));case 3:t=r.sent,a=t.data,n.setState((function(e){return Object(A.a)({},e,{posts:[a].concat(Object(z.a)(e.posts))})}));case 6:case"end":return r.stop()}}))},n.handleInput=function(e,t){var a=n.state[t];a[e.target.name]=e.target.value,n.setState({obj:a})},n}return Object(C.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.settingPosts()}},{key:"render",value:function(){var e=this,t=this.state.posts;return r.a.createElement(D.Consumer,null,(function(n){return r.a.createElement(B.a,{container:!0},r.a.createElement(B.a,{item:!0,xs:12,sm:3},function(){switch(n.state.user.role){case"Doctor":return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Perfil"),r.a.createElement("h3",null,"Nombre:",n.state.user.username),r.a.createElement("h3",null,"C\xe9dula Profesional:",n.state.user.cedula),r.a.createElement("h3",null,"T\xe9lefono:",n.state.user.phone),r.a.createElement("h3",null,"Especialidad:",n.state.user.username)),r.a.createElement("div",null,r.a.createElement(s.a,{variant:"contained",color:"primary"},"Registro de Pacientes")));case"Paciente":return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Perfil"),r.a.createElement("h3",null,"Nombre:",n.state.user.username),r.a.createElement("h3",null,"Edad:",n.state.user.age))}}(),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0        \xa0",r.a.createElement(B.a,{item:!0,xs:12,sm:3},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",function(){switch(n.state.user.role){case"Doctor":return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Crear Post"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){e.submitPost(t),e.props.history.push("/profile")}},r.a.createElement(R.a,{id:"title",label:"T\xedtulo",variant:"outlined",type:"text",name:"title",onChange:function(t){return e.handleInput(t,"singlePost")},value:e.state.posts.title}),r.a.createElement(R.a,{id:"description",label:"Descripci\xf3n",variant:"outlined",type:"text",name:"description",onChange:function(t){return e.handleInput(t,"singlePost")},value:e.state.posts.description}),r.a.createElement(s.a,{variant:"contained",color:"primary",type:"submit"},"Publicar"))));case"Paciente":return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Post"),t.length>0?t.map((function(e,t){return r.a.createElement(G.a,{key:t},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"Loading..."))}}(),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement(B.a,{item:!0,xs:12,sm:3},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",function(){switch(n.state.user.role){case"Doctor":return r.a.createElement(r.a.Fragment,null,t.length>0?t.map((function(e,t){return r.a.createElement(G.a,{key:t},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement(M.a,null,r.a.createElement(s.a,{size:"small"},"Actualizar"),r.a.createElement(s.a,{size:"small"},"Eliminar")))})):r.a.createElement("div",null,"Loading..."));case"Paciente":return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Doctores"),e.state.doctors.map((function(e,t){return r.a.createElement(G.a,{key:t},r.a.createElement("h3",null,"Nombre:",r.a.createElement("p",null,e.username)),r.a.createElement("h3",null,"C\xe9dula Profesional:",r.a.createElement("p",null,e.cedula)),r.a.createElement("h3",null,"Cel.",r.a.createElement("p",null,e.phone)))})))}}(),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"))}))}}]),t}(a.Component);V.contextType=D;var q=n(142),J=n(143),$=n(144),_=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function H(e){var t=_();return r.a.createElement(D.Consumer,null,(function(e){return r.a.createElement("div",{className:t.root},r.a.createElement(q.a,{position:"static"},r.a.createElement(J.a,null,r.a.createElement($.a,{variant:"h5",className:t.title},r.a.createElement(l.b,{to:"/"},"Smile")),"Doctor"===e.state.user.role&&r.a.createElement(l.b,{to:"/registro"},"Registro Pacientes"),e.loggedUser&&r.a.createElement(l.b,{to:"/profile"},"Perfil"),e.loggedUser&&r.a.createElement(l.b,{to:"/"},r.a.createElement(s.a,{onClick:function(){return e.handleLogout((function(){}))}},"LogOut")),!e.loggedUser&&r.a.createElement(l.b,{to:"/login"},r.a.createElement(s.a,{variant:"contained",color:"primary"},"Login")))))}))}var K=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={singleRegistro:{title:"",name:"",description:""},registros:[]},n.componentDidMount=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(n.context.settingRegistro());case 2:e=t.sent,n.setState({registros:e});case 4:case"end":return t.stop()}}))},n.submitRegistro=function(e){var t,a;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,v.a.awrap(P.submitRegistro(n.state.singleRegistro));case 3:t=r.sent,a=t.data,n.setState((function(e){return Object(A.a)({},e,{registros:[a].concat(Object(z.a)(n.state.registros))})}));case 6:case"end":return r.stop()}}))},n.handleInput=function(e,t){var a=n.state[t];a[e.target.name]=e.target.value,n.setState({obj:a})},n}return Object(C.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(D.Consumer,null,(function(t){return r.a.createElement("main",null,r.a.createElement("form",{onSubmit:function(t){e.submitRegistro(t),e.props.history.push("/registro")}},r.a.createElement(B.a,{tem:!0,xs:12,sm:6},r.a.createElement("div",null,r.a.createElement(R.a,{id:"title",label:"T\xedtulo",variant:"outlined",type:"text",name:"title",onChange:function(t){return e.handleInput(t,"singleRegistro")},value:e.state.singleRegistro.title}),r.a.createElement(R.a,{id:"name",label:"Nombre del Paciente",variant:"outlined",type:"text",name:"name",onChange:function(t){return e.handleInput(t,"singleRegistro")},value:e.state.singleRegistro.name}),r.a.createElement(R.a,{id:"description",label:"Descripci\xf3n",variant:"outlined",type:"text",name:"description",onChange:function(t){return e.handleInput(t,"singleRegistro")}}),r.a.createElement(s.a,{variant:"contained",color:"primary",type:"submit"},"Registrar")))),r.a.createElement(B.a,null,r.a.createElement(B.a,{tem:!0,xs:12,sm:6},r.a.createElement("h2",null,"Pacientes"),t.registros.map((function(e,t){return r.a.createElement(G.a,{key:t},r.a.createElement("h3",null,"Problema:",e.title),r.a.createElement("h3",null,"Nombre del Pasiente",e.name),r.a.createElement("h3",null,"Descripci\xf3n:",e.description))})))))}))}}]),t}(a.Component);K.contextType=D;var Q=function(){return r.a.createElement(l.a,null,r.a.createElement(H,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:d}),r.a.createElement(u.a,{exact:!0,path:"/signup",component:U}),r.a.createElement(u.a,{exact:!0,path:"/signupsi",component:W}),r.a.createElement(u.a,{exact:!0,path:"/login",component:N}),r.a.createElement(u.a,{exact:!0,path:"/profile",component:V}),r.a.createElement(u.a,{exact:!0,path:"/registro",component:K})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,n){e.exports=n(104)},81:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.f4a8b63e.chunk.js.map